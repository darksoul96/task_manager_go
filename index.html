
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Task Manager</title>
    <link href="static/styles.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/static/terminal_icon.svg">
  </head>
  <body>
    <h1>Terminal Task manager</h1>

    <div class="terminal">
      <ul class="terminal-lines" id="terminal-lines">
        <li>
          # welcome to your task manager
        </li>

        <li>
          # press help to see available commands
        </li>
        <li>
          <input type="text" id="input-command" 
            hx-post="/validate"
            hx-trigger="keyup[key=='Enter']"
            hx-target="#terminal-lines"
            hx-swap="beforeend"
          />
        </li>
      </ul> 
      <div id="error" class="error"></div>
    </div>

    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <script>
      document.body.addEventListener('htmx:configRequest', function(evt) {
          if (evt.detail.verb === 'POST' && evt.detail.path === '/validate') {
                var inputField = document.getElementById('input-command');
                var input = inputField.value.trim();
                evt.detail.parameters = JSON.stringify({ input: input });
            }
      });
      document.addEventListener('htmx:responseError', function(evt) {
            var errorDiv = document.getElementById('error');
            errorDiv.textContent = evt.detail.xhr.responseText;
      });

      document.addEventListener('htmx:afterRequest', function(evt) {
            var errorDiv = document.getElementById('error');
            errorDiv.textContent = ''; // Clear any previous error messages
      });

      document.addEventListener('htmx:afterSwap', function(evt) {
            var inputField = document.getElementById('input-command');
            inputField.value = ''; // Clear input field after successful submission
      });
    </script>
   </body>

</html>

